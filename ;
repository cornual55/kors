
<template>
  <div class="container my-10">
    <div class="flex gap-4">
 
      <router-link class="px-4 py-2 hover:bg-green rounded-lg" to="/shelf-lives">Сроки годности</router-link>
      <router-link class="px-4 py-2" to="/products">Продукты</router-link>
    </div>
    <my-dialog v-model:show="isAdding">
      <shelf-form @create="this.store.createShelf"
        >Добавление срока годности</shelf-form
      >
      <shelf-form-create />
    </my-dialog>
    <my-dialog v-model:show="isChanging"
      ><shelf-form
        :shelf_life="current_shelf"
        @create="
          this.store.updateShelf;
          isChanging = !isChanging;
        "
        >Изменение срока годности</shelf-form
      ></my-dialog
    >
    <top-bar :not_show="['sort', 'search', 'filter']" @click_create='isAdding = !isAdding' />
    <div class="mt-5 flex">
      <!-- <sidebar class="flex-1" /> -->
      <div class="flex-1 bg-gray-100 p-5 rounded-xl overflow-hidden">
        <h1 class="text-xl font-bold ml-5">Продукты</h1>       
        <div :v-for="product in products" :key="product.id">
            <div class="mt-2">
                        {{ product.name }}
                    </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>

import TopBar from "../components/TopBar.vue";
import { useProductsStore } from "../stores/ProductsStore";
import { storeToRefs } from "pinia";

const store = useProductsStore();
const {products} = storeToRefs(store);
store.fetchProducts();
</script>

<style lang="postcss" scoped>
table,
tr,
td,
th {
  /* display: block; */
  text-align: left;
  padding: 10px;
  font-size: 0.9rem;
}

table {
  width: 100%;
}

tr:nth-child(odd) {
  @apply bg-green/40;
}

tr:first-child {
  @apply bg-green/60 text-gray-900;
}

tr:nth-child(even) {
  @apply bg-green/20;
}

tr {
  padding: 0.7em 2vw;
}
</style>
